(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[385],{6099:function(t,e,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uen/unidad-apoyo",function(){return o(4353)}])},4353:function(t,e,o){"use strict";o.r(e);var s=o(5893),a=o(7294),r=o(1220),n=o(8066),u=o(4119),l=o(8392);let i=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Octe","Nov","Dic"];e.default=(0,l.Z)(()=>{let[t,e]=(0,a.useState)([]),[o,l]=(0,a.useState)(Array(12).fill(0)||0),[c,d]=(0,a.useState)({}),[p,h]=(0,a.useState)({}),[f,T]=(0,a.useState)([]),[b,y]=(0,a.useState)([]),[S,g]=(0,a.useState)(null),[w,_]=(0,a.useState)(),k="unidad-apoyo";return(0,a.useEffect)(()=>{let t=async()=>{try{let t=JSON.parse(localStorage.getItem("".concat(k,"_rubrosData")));if(t&&t.updatedRubros)e(t.updatedRubros),l(t.monthlyTotals||Array(12).fill(0)),d(t.rubrosTotals||{}),h(t.inputs||{});else{let t=(0,r.e)("csrftoken"),o=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:8000","/rubros/"),{method:"GET",headers:{"X-CSRFToken":t,Authorization:"Token ".concat(o),"Content-Type":"application/json"},credentials:"include"});if(!s.ok)throw Error("HTTP error! Status: ".concat(s.status));let a=await s.json();e(a||[])}let o=(0,r.e)("csrftoken"),s=localStorage.getItem("token"),a=await fetch("".concat("http://localhost:8000","/CentroCostos/"),{method:"GET",headers:{"X-CSRFToken":o,Authorization:"Token ".concat(s),"Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw Error("HTTP error! Status: ".concat(a.status));let n=await a.json(),u=n.results.filter(t=>"Unidades de Apoyo"===t.uen.nombre);T(u||[]),g(n.user_id||null),S||g(n.user_id||null)}catch(t){console.error("Error fetching data:",t)}};S||t();let o=t=>{let e={};return Object.keys(t).forEach(o=>{let s=t[o];s&&"string"==typeof s.value?e[o]={...s,value:s.value.replace(/\.00$/,"")}:e[o]=s}),e},s=JSON.parse(localStorage.getItem("".concat(k,"_rubrosData")));s&&s.updatedRubros&&(e(s.updatedRubros),l(s.monthlyTotals||Array(12).fill(0)),d(s.rubrosTotals||{}),h(s.inputs||{}));let a=JSON.parse(localStorage.getItem("".concat(k,"_selectedPresupuesto")));a&&(h(o(a.inputs||{})),l(a.monthlyTotals||{}),d(a.rubrosTotals||{}),e(a.updatedRubros||{}),_(a.centroCostoid||{}),y(a.id||{}));let n=t=>{if("selectedPresupuesto"===t.key){let s=JSON.parse(t.newValue);s&&(h(o(s.inputs||{})),l(s.monthlyTotals||[]),d(s.rubrosTotals||{}),e(s.updatedRubros||[]),_(s.centroCostoid||[]),y(s.id||[]))}};return window.addEventListener("storage",n),()=>{window.removeEventListener("storage",n)}},[S]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",overflow:"auto",marginRight:"10px",height:"100vh"},children:[(0,s.jsx)(u.Z,{}),(0,s.jsx)(n.Z,{presupuestoid:b,CentroCostoid:w,setCentroCostoid:_,updatedRubros:t,setUpdatedRubros:e,setInputValues:h,inputValues:p,rubrosTotals:c,setRubrosTotals:d,monthlyTotals:o,setMonthlyTotals:l,MONTHS:i,userId:S,updatedcentroCostos:f,uen:"Unidades de Apoyo"})]})})})}},function(t){t.O(0,[251,319,920,195,651,119,570,888,774,179],function(){return t(t.s=6099)}),_N_E=t.O()}]);