(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[579],{3505:function(t,e,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uen/constructora",function(){return o(8572)}])},8572:function(t,e,o){"use strict";o.r(e);var r=o(5893),s=o(7294),a=o(1220),n=o(8066),u=o(4119),l=o(8392);let c=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Octe","Nov","Dic"];e.default=(0,l.Z)(()=>{let[t,e]=(0,s.useState)([]),[o,l]=(0,s.useState)(Array(12).fill(0)||0),[i,d]=(0,s.useState)({}),[p,h]=(0,s.useState)({}),[f,T]=(0,s.useState)([]),[b,S]=(0,s.useState)([]),[g,w]=(0,s.useState)(null),[y,C]=(0,s.useState)(),_="constructora";return(0,s.useEffect)(()=>{let t=async()=>{try{let t=JSON.parse(localStorage.getItem("".concat(_,"_rubrosData")));if(t&&t.updatedRubros)e(t.updatedRubros),l(t.monthlyTotals||Array(12).fill(0)),d(t.rubrosTotals||{}),h(t.inputs||{});else{let t=(0,a.e)("csrftoken"),o=localStorage.getItem("token"),r=await fetch("".concat("http://localhost:8000","/rubros/"),{method:"GET",headers:{"X-CSRFToken":t,Authorization:"Token ".concat(o),"Content-Type":"application/json"},credentials:"include"});if(!r.ok)throw Error("HTTP error! Status: ".concat(r.status));let s=await r.json();e(s||[])}let o=(0,a.e)("csrftoken"),r=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:8000","/CentroCostos/"),{method:"GET",headers:{"X-CSRFToken":o,Authorization:"Token ".concat(r),"Content-Type":"application/json"},credentials:"include"});if(!s.ok)throw Error("HTTP error! Status: ".concat(s.status));let n=await s.json(),u=n.results.filter(t=>"Constructora"===t.uen.nombre);T(u||[]),w(n.user_id||null),g||w(n.user_id||null)}catch(t){console.error("Error fetching data:",t)}};g||t();let o=t=>{let e={};return Object.keys(t).forEach(o=>{let r=t[o];r&&"string"==typeof r.value?e[o]={...r,value:r.value.replace(/\.00$/,"")}:e[o]=r}),e},r=JSON.parse(localStorage.getItem("".concat(_,"_rubrosData")));r&&r.updatedRubros&&(e(r.updatedRubros),l(r.monthlyTotals||Array(12).fill(0)),d(r.rubrosTotals||{}),h(r.inputs||{}));let s=JSON.parse(localStorage.getItem("".concat(_,"_selectedPresupuesto")));s&&(h(o(s.inputs||{})),l(s.monthlyTotals||{}),d(s.rubrosTotals||{}),e(s.updatedRubros||{}),C(s.centroCostoid||{}),S(s.id||{}));let n=t=>{if("selectedPresupuesto"===t.key){let r=JSON.parse(t.newValue);r&&(h(o(r.inputs||{})),l(r.monthlyTotals||[]),d(r.rubrosTotals||{}),e(r.updatedRubros||[]),C(r.centroCostoid||[]),S(r.id||[]))}};return window.addEventListener("storage",n),()=>{window.removeEventListener("storage",n)}},[g]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row",overflow:"auto",marginRight:"10px",height:"100vh"},children:[(0,r.jsx)(u.Z,{}),(0,r.jsx)(n.Z,{presupuestoid:b,CentroCostoid:y,setCentroCostoid:C,updatedRubros:t,setUpdatedRubros:e,setInputValues:h,inputValues:p,rubrosTotals:i,setRubrosTotals:d,monthlyTotals:o,setMonthlyTotals:l,MONTHS:c,userId:g,updatedcentroCostos:f,uen:"Constructora"})]})})})}},function(t){t.O(0,[251,319,920,195,677,80,119,570,888,774,179],function(){return t(t.s=3505)}),_N_E=t.O()}]);